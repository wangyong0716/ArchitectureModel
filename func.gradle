ext {
    printDpdc = this.&printDpdc
    dpdcDatabase = this.&dpdcDatabase
    dpdcLog = this.&dpdcLog
}

def printDpdc() {
    for (Map.Entry entry : rootProject.properties) {
        println(entry.key + " ---> " + entry.value)
    }
}

boolean hasPProperty(String key) {
    return rootProject.hasProperty(key)
}

def dpdcLib(configureClosure, lib) {
    if (hasPProperty('shp')) {
        configureClosure.implementation(rootProject.ext.modules.database)
    } else {
        configureClosure.api project(lib)
    }
}

def dpdcLog(configureClosure) {
    dpdcLib(configureClosure, ':log')
}

def dpdcDatabase(configureClosure) {
    dpdcLib(configureClosure, ':database')
}
